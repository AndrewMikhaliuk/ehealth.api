{
   "$schema": "http://json-schema.org/draft-04/schema#",
   "definitions": {
      "uuid": {
        "type": "string",
        "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$"
      },
      "name": {
      "type": "string",
      "pattern": "^(?!.*[ЫЪЭЁыъэё@%&$^#])[a-zA-ZА-ЯҐЇІЄа-яґїіє0-9№\\\"!\\^\\*)\\]\\[(._-].*$"
      },
      "phone": {
        "type": "object",
        "properties": {
            "type": {
              "type": "string"
            },
            "number": {
              "type": "string",
              "pattern": "^\\+38[0-9]{10}$"
            }
        },
        "required": [
          "type",
          "number"
        ],
        "additionalProperties": false
      },
   },
   "type": "object",
   "properties": {
      "id":{
        "$ref": "#/definitions/uuid",
        "description":"Declaration ID, a UUID string."
      },
      "declaration_number":{
       "type": "string",
        "description": "Public medication request human readable number"
      },
      "start_date":{
        "type": "string",
        "format": "date-time",
        "description": "Should be defined on the client side."
      },
      "status":{
        "type": "string",
        "enum": [
          "active",
          "pending_verification",
          "terminated"
        ]
      },
      "person":{
        "type": "object",
        "properties": {
          "id":{
            "$ref": "#/definitions/uuid",
            "description":"Declaration ID, a UUID string."
          },
          "first_name": {
            "type": "string",
            "items": {
              "$ref": "#/definitions/name"
            },
            "minLength": 1
          },
          "last_name": {
            "type": "string",
            "items": {
              "$ref": "#/definitions/name"
            },
            "minLength": 1
          },
          "second_name": {
            "type": "string",
            "items": {
              "$ref": "#/definitions/name"
            },
            "minLength": 1
          },
        },
      "required": [
        "first_name",
        "last_name",
        "second_name",
        "id"
      ],
      "additionalProperties": false,
      "description": "Object that described a Patient" 
      },
      "employee":{
        "type": "object",
        "properties": {
          "id":{
            "$ref": "#/definitions/uuid",
            "description":"Declaration ID, a UUID string."
          },
          "position":{
            "type": "string",
            "minLength": 2,
            "maxLength": 2
          },
            "party":{
              "type": "object",
              "properties": {
                "id":{
                  "$ref": "#/definitions/uuid",
                  "description":"Declaration ID, a UUID string."
                },
                "first_name": {
                  "type": "string",
                  "items": {
                    "$ref": "#/definitions/name"
                  },
                  "minLength": 1
                },
                "last_name": {
                  "type": "string",
                  "items": {
                    "$ref": "#/definitions/name"
                  },
                  "minLength": 1
                },
                "second_name": {
                  "type": "string",
                  "items": {
                    "$ref": "#/definitions/name"
                  },
                  "minLength": 1
                },
                "email": {
                  "type": "string",
                  "format": "email"
                },
                "phones": {
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/phone"
                  }
                }
              },
              "required": [
              "first_name",
              "last_name",
              "second_name",
              "id",
              "phones",
              "email"
              ],
              "additionalProperties": false,
              "description": "Object that described a party" 
            }
          },
          "required": [
            "id",
            "position",
            "party"
          ],
        "additionalProperties": false,
        "description": "Object that described a employee" 
      },
      "legal_entity":{
        "type": "object",
        "properties": {
          "id":{
            "$ref": "#/definitions/uuid",
            "description":"Declaration ID, a UUID string."
          },
          "name":{
            "type": "string",
            "pattern":"^[А-Яа-яЁёЇїІіЄєҐґ'\\- ]*$",
          },
          "short_name":{
            "$ref": "#/definitions/name"
          },
          "legal_form": {
            "type": "string",
            "description": "Dictionary: LEGAL_FORM"
          },
          "edrpou": {
            "type": "string",
            "pattern": "^[0-9]{8,10}$"
          },
        },
        "required": [
          "id",
          "name",
          "short_name",
          "legal_form",
          "edrpou"
        ],
        "additionalProperties": false,
      },
      "division":{
        "type": "object",
        "properties": {
          "id":{
            "$ref": "#/definitions/uuid",
            "description":"Declaration ID, a UUID string."         
          },
          "name":{
            "type": "string",
            "pattern":"^[А-Яа-яЁёЇїІіЄєҐґ'\\- ]*$",
          },
          "type": {
            "type": "string",
            "enum": [
              "AMBULANT_CLINIC",
              "DRUGSTORE_POINT",
              "CLINIC",
              "FAP",
              "DRUGSTORE"
            ]
          },
          "status":{
            "type": "string",
            "enum": [
              "ACTIVE",
              "INACTIVE"
            ]
          }
        },
        "required": [
          "id",
          "name",
          "type",
          "status"
        ],
        "additionalProperties": false,
      }
  },
  "required": [
     "id",
     "declaration_number",
     "start_date",
     "status",
     "person",
     "employee",
     "legal_entity",
     "division"
  ]
 }
